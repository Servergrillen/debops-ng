{# Copyright (C) 2020 Maciej Delmanowski <drybjed@gmail.com>
 # Copyright (C) 2020 DebOps <https://debops.org/>
 # SPDX-License-Identifier: GPL-3.0-or-later
 #}
# Template for the initial 'ansible.cfg' contents. The comments will be
# stripped by the ConfigParser. Users can add or modify configuration
# parameters using the '.debops.cfg' configuration file.

[defaults]

# String which will be set as the "ansible_amanged" variable in templates
# generated by Ansible.
ansible_managed = "This file is managed remotely, all changes will be lost"

# In case of failure, Ansible creates the '<playbook>.retry' files beside the
# playbook which contain names of hosts that failed. This is useless with
# DebOps since playbooks are in a central location therefore it will be
# disabled by default.
retry_files_enabled = False

# Make the default output of 'ansible-playbook' easier to read by a human.
stdout_callback = "yaml"

# The default inventory is managed in the DebOps project directory,
# 'ansible/inventory/' subdirectory.
inventory = "ansible/inventory"

# List of directories that contain Ansible Collections.
collections_paths = "{{ collections[::-1] | join(':') }}"

# List of directories that contain Ansible roles.
roles_path = "{{ roles[::-1] | join(':') }}"

# Additional lists that point Ansible to various directories with custom
# Ansible plugins. When the legacy configuration is disabled, the custom plugin
# paths will not be included in the generated configuration file with
# assumption that they are available via Ansible Collections.
{% if plugin_types | d() %}
{%   for plugin in plugin_types %}
{%     if plugin == 'modules' %}
{%       set option = 'library' %}
{%     else %}
{%       set option = plugin + '_plugins' %}
{%     endif %}
{{     '{} = "{}"'.format(option, plugins[plugin][::-1] | join(':')) }}
{%   endfor %}
{% endif %}

[inventory]

# This option disables the warnings about missing Ansible inventory groups
# defined in a playbook. This warning message is very common in DebOps
# playbooks and disabling it is recommended.
host_pattern_mismatch = "ignore"
